{
  "name": "xvfb",
  "buildsystem": "meson",
  "build-options": {
    "prepend-path": "/app/build_staging/xvfb/bin",
    "prepend-ld-library-path": "/app/build_staging/xvfb/lib",
    "prepend-pkg-config-path": "/app/build_staging/xvfb/lib/pkgconfig",
    "env": {
      "LPATH": "/app/build_staging/xvfb/lib"
    }
  },
  "config-opts": [
    "--prefix=/app/build_staging/xvfb",
    "-Dxorg=true",
    "-Dxvfb=true",
    "-Dhal=false"
  ],
  "sources": [
    {
      "type": "archive",
      "url": "https://gitlab.freedesktop.org/xorg/xserver/-/archive/xorg-server-21.1.20/xserver-xorg-server-21.1.20.tar.bz2",
      "sha256": "ee64266aeb63659e0a395545c028baab2ddec713029fe37327f055271a08fba9"
    },
    {
      "type": "file",
      "path": "xvfb-run"
    }
  ],
  "post-install": [
    "install -c -m 755 ${FLATPAK_BUILDER_BUILDDIR}/xvfb-run /app/build_staging/xvfb/bin/xvfb-run"
  ],
  "modules": [
    {
      "name": "libxcvt",
      "buildsystem": "meson",
      "sources": [
        {
          "type": "archive",
          "url": "https://gitlab.freedesktop.org/xorg/lib/libxcvt/-/archive/libxcvt-0.1.3/libxcvt-libxcvt-0.1.3.tar.bz2",
          "sha256": "1568702e1b62f4a82c97b3e072e038d5f6123f190e2d220e29f63a8fe29d3943"
        }
      ]
    },
    {
      "name": "xvfb-libXmu",
      "buildsystem": "simple",
      "build-commands": [
        "./configure --prefix=/app/build_staging/xvfb --exec_prefix=/app/build_staging/xvfb",
        "make",
        "make install"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://xorg.freedesktop.org/archive/individual/lib/libXmu-1.2.1.tar.gz",
          "sha256": "bf0902583dd1123856c11e0a5085bd3c6e9886fbbd44954464975fd7d52eb599"
        }
      ]
    },
    {
      "name": "xvfb-libfontenc",
      "buildsystem": "simple",
      "build-commands": [
        "./configure --prefix=/app/build_staging/xvfb --exec_prefix=/app/build_staging/xvfb",
        "make",
        "make install"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://xorg.freedesktop.org/archive/individual/lib/libfontenc-1.1.8.tar.xz",
          "sha256": "7b02c3d405236e0d86806b1de9d6868fe60c313628b38350b032914aa4fd14c6"
        }
      ]
    },
    {
      "name": "xvfb-libtirpc",
      "buildsystem": "simple",
      "build-commands": [
        "./configure --prefix=/app/build_staging/xvfb --exec_prefix=/app/build_staging/xvfb --disable-gssapi",
        "make",
        "make install"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://downloads.sourceforge.net/sourceforge/libtirpc/libtirpc-1.3.7.tar.bz2",
          "sha256": "b47d3ac19d3549e54a05d0019a6c400674da716123858cfdb6d3bdd70a66c702"
        }
      ]
    },
    {
      "name": "xvfb-font-util",
      "buildsystem": "simple",
      "build-commands": [
        "./configure --prefix=/app/build_staging/xvfb --exec_prefix=/app/build_staging/xvfb",
        "make",
        "make install"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://xorg.freedesktop.org/archive/individual/font/font-util-1.4.1.tar.gz",
          "sha256": "f029ae80cdd75d89bee7f7af61c21e07982adfb9f72344a158b99f91f77ef5ed"
        }
      ]
    },
    {
      "name": "xvfb-libXfont2",
      "buildsystem": "simple",
      "build-options": {
        "prepend-path": "/app/build_staging/xvfb/bin",
        "prepend-ld-library-path": "/app/build_staging/xvfb/lib",
        "prepend-pkg-config-path": "/app/build_staging/xvfb/lib/pkgconfig"
      },
      "build-commands": [
        "./configure --prefix=/app/build_staging/xvfb --exec_prefix=/app/build_staging/xvfb",
        "make",
        "make install"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://xorg.freedesktop.org/archive/individual/lib/libXfont2-2.0.7.tar.gz",
          "sha256": "90b331c2fd2d0420767c4652e007d054c97a3f03a88c55e3b986bd3acfd7e338"
        }
      ]
    },
    {
      "name": "xvfb-xauth",
      "buildsystem": "simple",
      "build-options": {
        "prepend-path": "/app/build_staging/xvfb/bin",
        "prepend-ld-library-path": "/app/build_staging/xvfb/lib",
        "prepend-pkg-config-path": "/app/build_staging/xvfb/lib/pkgconfig"
      },
      "build-commands": [
        "./autogen.sh --prefix=/app/build_staging/xvfb --exec_prefix=/app/build_staging/xvfb",
        "make",
        "make install"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://gitlab.freedesktop.org/xorg/app/xauth/-/archive/xauth-1.1.3/xauth-xauth-1.1.3.tar.bz2",
          "sha256": "0b32c1d8b0cb1044dd73d241f77d1ad9157ff139058a3f997b2954697aebfa66"
        }
      ]
    }
  ]
}
